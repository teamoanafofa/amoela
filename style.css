const music = document.getElementById("music");

function playMusic() {
  music.play();
  localStorage.setItem("musicPlaying", "true");
}

if (localStorage.getItem("musicPlaying") === "true") {
  music.play().catch(() => {});
}

// ğŸ’Œ Nova aba com carta
function openLetter() {
  localStorage.setItem("musicPlaying", "true");

  const letterWindow = window.open("", "_blank");

  letterWindow.document.write(`
    <html>
    <head>
      <title>ğŸ’Œ Para VocÃª</title>
      <link rel="stylesheet" href="style.css">
    </head>
    <body>
      <audio src="boca.mp3" autoplay loop></audio>

      <div class="letter">
        <h1>ğŸ’– Uma carta pra vocÃª</h1>
        <p>
          Desde que te conheci, meus dias ficaram mais leves,
          meus sorrisos mais sinceros e meu coraÃ§Ã£o mais seu.
        </p>
        <p>
          Hoje, oficialmente, comeÃ§a nossa histÃ³ria ğŸ’•
        </p>
        <h2>ğŸ’ 19/11/2025 ğŸ’</h2>
      </div>

      <div class="hearts"></div>
      <script>
        setInterval(() => {
          const heart = document.createElement("span");
          heart.innerHTML = "â¤ï¸";
          heart.style.left = Math.random() * 100 + "vw";
          heart.style.fontSize = Math.random() * 20 + 20 + "px";
          document.querySelector(".hearts").appendChild(heart);
          setTimeout(() => heart.remove(), 5000);
        }, 300);
      </script>
    </body>
    </html>
  `);
}

// â¤ï¸ CoraÃ§Ãµes caindo
setInterval(() => {
  const heart = document.createElement("span");
  heart.innerHTML = "â¤ï¸";
  heart.style.left = Math.random() * 100 + "vw";
  heart.style.fontSize = Math.random() * 20 + 20 + "px";
  document.querySelector(".hearts").appendChild(heart);
  setTimeout(() => heart.remove(), 5000);
}, 300);
